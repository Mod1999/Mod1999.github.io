(function(){for(var a=!1,b=[],c=function(){if(!a){a=!0;for(var c=0;c<b.length;c++)b[c]();b=[]}},d=location.protocol||"https:",e=document.getElementsByTagName("script"),f="games.mail.ru",g=/\/\/([^/]+)\/s?js\/(kit_client|kit\/_utils).js/,h=0;h<e.length;h++){var k=(e[h].src||"").match(g);if(k){f=k[1];break}}var m=f;window.GMR=window.GMR||{};var n=window.GMR.Utils={getDomain:function(){return f},getStaticDomain:function(){return m},gebi:function(a){return document.getElementById(a)},addListener:function(a,
b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},addOnLoadListener:function(a,b){a&&b&&(a.onreadystatechange=a.onload=function(){var c=a.readyState;b.done||c&&!/loaded|complete/.test(c)||(b(),a.onreadystatechange=a.onload=null)})},onDomReady:function(c){"function"===typeof c&&(a?setTimeout(c,1):b.push(c))},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=
!0},setInnerHtml:function(a,b){a.innerHTML="_"+b;a.removeChild(a.firstChild)},addClass:function(a,b){for(var c=b.split(" "),d=0;d<c.length;d++)0>a.className.indexOf(c[d])&&(a.className=a.className+" "+c[d])},removeClass:function(a,b){a.className=(a.className||"").replace(new RegExp("\\s*\\b"+b+"\\b\\s*","g")," ")},loadScript:function(a,b){var c=document.createElement("script");c.type="text/javascript";c.src=a;c.onload=b;(document.body||document.head).appendChild(c)},loadJSONP:function(a,b){"object"!=
typeof GMR.callbacks&&(GMR.callbacks={idx:0});var c=++GMR.callbacks.idx;GMR.callbacks[c]=function(){b.apply(this,arguments);delete GMR.callbacks[c]};a=a+(a.match(/\?/)?"&":"?")+"callback="+encodeURIComponent("GMR.callbacks["+c+"]");n.loadScript(a)},loadXdm:function(a){if(window.easyXDM)return a();n.loadScript(d+"//"+m+"/js/easyXDM.min.js",a);return!1},extend:function(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b],d;for(d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},parseUrlEncoded:function(a){var b=
{};a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].split("=",2);b[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return b},getCookie:function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):void 0},setCookie:function(a,b,c){c=c||{};var d=c.expires;if("number"==typeof d&&d){var e=new Date;e.setTime(e.getTime()+1E3*d);d=c.expires=e}d&&d.toUTCString&&(c.expires=d.toUTCString());b=encodeURIComponent(b);
a=a+"="+b;for(var f in c)a+="; "+f,b=c[f],!0!==b&&(a+="="+b);document.cookie=a}};n.addListener(document,"DOMContentLoaded",c);n.addListener(window,"load",c)})();window.GMR=window.GMR||{};
(function(a){function b(a){return"[object Array]"===Object.prototype.toString.call(a)}function c(a,c){if(b(a))for(var d=0;d<a.length;d++)c(a[d]);else c(a)}function d(a){var f="pending",g=[],h=[],k=[],m=null,n={done:function(){for(var a=0;a<arguments.length;a++)if(arguments[a])if(b(arguments[a]))for(var c=arguments[a],d=0;d<c.length;d++)"resolved"===f&&c[d].apply(this,m),g.push(c[d]);else"resolved"===f&&arguments[a].apply(this,m),g.push(arguments[a]);return this},fail:function(){for(var a=0;a<arguments.length;a++)if(arguments[a])if(b(arguments[a]))for(var c=
arguments[a],d=0;d<c.length;d++)"rejected"===f&&c[d].apply(this,m),h.push(c[d]);else"rejected"===f&&arguments[a].apply(this,m),h.push(arguments[a]);return this},always:function(){return this.done.apply(this,arguments).fail.apply(this,arguments)},progress:function(){for(var a=0;a<arguments.length;a++)if(arguments[a])if(b(arguments[a]))for(var c=arguments[a],d=0;d<c.length;d++)"pending"===f&&k.push(c[d]);else"pending"===f&&k.push(arguments[a]);return this},then:function(){1<arguments.length&&arguments[1]&&
this.fail(arguments[1]);0<arguments.length&&arguments[0]&&this.done(arguments[0]);2<arguments.length&&arguments[2]&&this.progress(arguments[2])},promise:function(a){if(null==a)return n;for(var b in n)a[b]=n[b];return a},state:function(){return f},debug:function(){console.log("[debug]",g,h,f)},isRejected:function(){return"rejected"===f},isResolved:function(){return"resolved"===f},pipe:function(a,b,e){return d(function(d){c(a,function(a){"function"===typeof a?r.done(function(){var b=a.apply(this,arguments);
b&&"function"===typeof b?b.promise().then(d.resolve,d.reject,d.notify):d.resolve(b)}):r.done(d.resolve)});c(b,function(a){"function"===typeof a?r.fail(function(){var b=a.apply(this,arguments);b&&"function"===typeof b?b.promise().then(d.resolve,d.reject,d.notify):d.reject(b)}):r.fail(d.reject)})}).promise()}},r={resolveWith:function(a){if("pending"===f){f="resolved";for(var b=m=1<arguments.length?arguments[1]:[],c=0;c<g.length;c++)g[c].apply(a,b)}return this},rejectWith:function(a){if("pending"===
f){f="rejected";for(var b=m=1<arguments.length?arguments[1]:[],c=0;c<h.length;c++)h[c].apply(a,b)}return this},notifyWith:function(a){if("pending"===f)for(var b=m=1<arguments.length?arguments[1]:[],c=0;c<k.length;c++)k[c].apply(a,b);return this},resolve:function(){return this.resolveWith(this,arguments)},reject:function(){return this.rejectWith(this,arguments)},notify:function(){return this.notifyWith(this,arguments)}},p=n.promise(r);a&&a.apply(p,[p]);return p}d.when=function(){if(2>arguments.length){var a=
arguments.length?arguments[0]:void 0;return a&&"function"===typeof a.isResolved&&"function"===typeof a.isRejected?a.promise():d().resolve(a).promise()}return function(a){for(var b=d(),c=a.length,e=0,m=Array(c),n=0;n<a.length;n++)(function(d){var p=null;a[d].done?a[d].done(function(){m[d]=2>arguments.length?arguments[0]:arguments;++e==c&&b.resolve.apply(b,m)}).fail(function(){b.reject(arguments)}):(p=a[d],a[d]=new Deferred,a[d].done(function(){m[d]=2>arguments.length?arguments[0]:arguments;++e==c&&
b.resolve.apply(b,m)}).fail(function(){b.reject(arguments)}).resolve(p))})(n);return b.promise()}(arguments)};a.Deferred=d})(window.GMR);(function(){window.GMR=window.GMR||{};window.GMR.detect=function(){Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!==typeof a)throw new TypeError(a+" is not a function");b&&(c=b);d=Array(g);for(e=0;e<g;){var h;e in f&&(h=f[e],h=a.call(c,h,e,f),d[e]=h);e++}return d});var a=function(){};a.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"];
a.types=["browser","os","device"];a.regexes={browser_parsers:[{regex:"(OPR)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Opera"},{regex:"(YaBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Edge)/(\\d+)\\.(\\d+)",family_replacement:"Edge"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},
{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",
family_replacement:"Swiftfox",other:!0},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Edge|Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},
{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",
family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.2)",
os_replacement:"Windows 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"}],mobile_os_families:[],device_parsers:[],mobile_browser_families:[]};a.families=function(){var b={};a.types.map(function(a){b[a]=[]});return b}();var b=Array.prototype.forEach,c=function(a,
b){for(var c={},d=0;d<b.length&&!(c=b[d](a));d++);return c},d=function(a,b){e(a,function(a){e(b,function(b){delete a[b]})})},e=forEach=function(a,c,d){if(null!=a)if(b&&a.forEach===b)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++)c.call(d,a[e],e,a);else for(e in a)_.has(a,e)&&c.call(d,a[e],e,a)},f=function(a){return!(!a||"undefined"==typeof a||null==a)},g=function(a){var b="";a=a||{};f(a)&&f(a.major)&&(b+=a.major,f(a.minor)&&(b+="."+a.minor,f(a.patch)&&(b+="."+a.patch)));
return b},h=function(a){a=a||{};var b=g(a);b&&(b=" "+b);return a&&f(a.family)?a.family+b:""};a.parse=function(b){var e=function(b){return a.regexes[b+"_parsers"].map(function(a){var c=new RegExp(a.regex),d=a[("browser"===b?"family":b)+"_replacement"],e=a.major_version_replacement;return function(b){b=b.match(c);if(!b)return null;var f={};f.family=(d?d.replace("$1",b[1]):b[1])||"other";f.major=parseInt(e?e:b[2])||null;f.minor=b[3]?parseInt(b[3]):null;f.patch=b[4]?parseInt(b[4]):null;f.tablet=a.tablet;
f.man=a.manufacturer||null;return f}})},n=e("browser"),r=e("os"),p=e("device"),e=new function(){};e.source=b;e.browser=c(b,n);f(e.browser)?(e.browser.name=h(e.browser),e.browser.version=g(e.browser)):e.browser={};e.os=c(b,r);f(e.os)?(e.os.name=h(e.os),e.os.version=g(e.os)):e.os={};e.device=c(b,p);f(e.device)?(e.device.name=h(e.device),e.device.version=g(e.device)):e.device={tablet:!1,family:"Other"};b={};"Spider"===e.browser.family?e.device.type="Spider":e.browser.tablet||e.os.tablet||e.device.tablet?
e.device.type="Tablet":b.hasOwnProperty(e.browser.family)?e.device.type="Mobile":e.device.type="Desktop";e.device.manufacturer=e.browser.man||e.os.man||e.device.man||null;d([e.browser,e.os,e.device],["tablet","man"]);return e};return a}()})();(function(){var a,b=window.GMR.Utils,c,d=b.getStaticDomain(),e=window.GMR.detect.parse(navigator.userAgent),f=e.browser.family,g=e.browser.major,h,k,m,n,r=function(){b.removeClass(h,"gmrGcDownload_active");k.parentNode.removeChild(k);m&&m.parentNode.removeChild(m);n&&n.parentNode.removeChild(n);k=n=m=null},p=function(d,e,p){"safari"!==f.toLowerCase()&&(a=p||window.GMR.settings.download_theme||"dark",c="gmrGcDownload_theme-"+a,m=document.createElement("div"),h=document.body,k=document.createElement("div"),
k.className="gmrGcDownload__popup__overlay",m.className="gmrGcDownload__popup__arrow",r.title="\u0417\u0430\u043a\u0440\u044b\u0442\u044c",h.appendChild(m),h.insertBefore(k,m),b.addClass(h,"gmrGcDownload_active "+c),b.addClass(document.getElementsByTagName("html")[0],"gmrBrowser_"+f+" gmrBrowser_"+f+g),b.addListener(k,"click",r))},s=function(d,e,p){"safari"!==f.toLowerCase()&&(a=p||window.GMR.settings.download_theme||"dark",c="gmrGcDownload_theme-"+a,m=document.createElement("div"),n=document.createElement("div"),
h=document.body,k=document.createElement("div"),k.className="gmrGcDownload__popup__overlay gmrGcDownload__popup__overlay_gradient",m.className="gmrGcDownload__popup__arrow",n.className="gmrGcDownload__popup__text",n.innerHTML="\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438",h.appendChild(m),h.appendChild(n),h.insertBefore(k,m),b.addClass(h,"gmrGcDownload_active "+c),b.addClass(document.getElementsByTagName("html")[0],"gmrBrowser_"+
f+" gmrBrowser_"+f+g),b.addListener(k,"click",r))};window.GMR.showDownloadHint=function(){var a=arguments;setTimeout(function(){p.apply(window,a)},1)};window.GMR.showSimpleDownloadHint=function(){var a=arguments;setTimeout(function(){s.apply(window,a)},1)};window.GMR.Utils.onDomReady(function(){if(!b.gebi("js-gmr-client-style")){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.id="js-gmr-client-style";a.href="//"+d+"/css/kit/client.css?r="+Math.random();document.body.appendChild(a)}})})();(function(){function a(){if(g&1)try{console.log.apply(console,arguments)}catch(a){var b=document.createElement("div");b.style.backgroundColor="white";b.style.padding="2px";document.body.appendChild(b);b.innerText=Array.prototype.join.call(arguments," ")}}function b(){if(!arguments.callee.called){arguments.callee.called=!0;var a=new Image;a.src=s+"//rs.mail.ru/d1611017.gif";a.style.width=a.style.height="0px";document.body.appendChild(a)}}function c(a){var b=new Image;b.src=s+"//rs.mail.ru/d1611018.gif";
b.style.width=b.style.height="0px";p.addOnLoadListener(b,a);clearTimeout(u);u=setTimeout(function(){a()},2E3);document.body.appendChild(b)}function d(a,b,c){a=a.getElementsByTagName("iframe")[0];a.style.width=b+"px";a.style.height=c+"px"}function e(b,e,f){a("XDM message: ",b);var g=p.parseUrlEncoded(b);switch(g.type){case "title":x.setTitle(g.title);break;case "show":x.show();x.adjust(g.width,g.height);break;case "adjust":x.adjust(g.width,g.height);break;case "adjust_block":d(f,g.width,g.height);
break;case "close":x.hide();x.clear();break;case "reload":window.location.reload();break;case "redirect":b=function(){arguments.callee.done||(arguments.callee.done=1,document.location=g.url)};c(b);setTimeout(b,100);break;case "show_signin":GMR.showSigninForm({page:g.page});break;case "show_signin_autoplay":b=document.location+((document.location+"").match(/\?/)?"&":"?")+"kit_autoplay=1";GMR.showSigninForm({page:b});break;case "show_signup":GMR.showSignupForm({page:g.page})}}function f(a){a&&a.page&&
window.console&&window.console.warn("Passing {page: '...'} to GMR.show(VK|OK|FB)Signin is deprecated! Use GMR.config({ page: '...' }) instead.");var b=String(GMR.settings.signup_page||GMR.settings.page||a.page||document.location),b=s+"//"+q+"/kit/social_back/?continue="+encodeURIComponent(b),c=s+"//"+q+"/kit/social_err/",b=a.authurl+(-1<a.authurl.indexOf("?")?"&":"?")+"client_id="+encodeURIComponent(a.client_id)+"&page="+encodeURIComponent(b)+"&fail="+encodeURIComponent(c),c=a.width||660;a=a.height||
550;var d=window.open("about:blank","_blank","menubar=no,scrollbars=no,resizable=yes,location=yes,status=no,width="+c+",height="+a);try{d.window.document.write('<link rel="stylesheet" type="text/css" href="//'+w+"/css/kit/client.css?r="+Math.random()+'"><div class="gmrSignin__social__loader"></div>'),d.window.document.close()}catch(e){}d.moveTo((window.screen.availWidth-c)/2,(window.screen.availHeight-a)/2);d.focus();d.location=b;var f=setInterval(function(){if(d.closed){clearInterval(f);var a=document.cookie.match(/(?:^|; )socialback=([^;]*)/);
a&&a[1]?(document.cookie="socialback=; expires=Thu, 25 Mar 1999 00:00:00 GMT; domain=.mail.ru; path=/",window.location=decodeURIComponent(a[1])):window.location.reload()}},500);setTimeout(function(){clearInterval(f)},9E5);x.init();x.hide();x.clear()}var g=parseInt(((document.location.search+"").match(/\bkit_debug=(\d+)/)||[])[1]||0),h=((document.location.search+"").match(/\bsite_id=(.*?)(&|$)/)||[])[1]||"";if(!h.length){var k=document.cookie,m=k.indexOf("__partner_id="),n;-1<m&&(m=k.indexOf("=",m)+
1,n=k.indexOf(";",m),-1==n&&(n=k.length),h=decodeURIComponent(k.substring(m,n)))}var r=window.GMR;window.GMR=window.GMR||{};var p=window.GMR.Utils,s=location.protocol||"https:",q=p.getDomain(),t=q.match("gm1.corp")?"social.games.gm1.corp.mail.ru":q.match("gm2.corp")?"social.games.gm2.corp.mail.ru":"api.games.mail.ru/social",w=p.getStaticDomain(),u,x={overlayVisible:!1,darkness:null,holder:null,overlay:null,container:null,init:function(){function a(b){b=b||window.event;x.hide();x.clear();p.stopPropagation(b)}
if(!this.container){if(!p.gebi("js-gmr-client-style")){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.id="js-gmr-client-style";b.href="//"+w+"/css/kit/client.css?r="+Math.random();document.body.appendChild(b)}b=document.createElement("div");document.body.appendChild(b);p.setInnerHtml(b,'<div id="js_kit_darkness" style="background-color: #000; z-index: 2000; opacity: 0.5; filter: alpha(opacity=50); position: fixed; display: none; top: 0; left: 0; width: 100%; height: 100%;"></div><div id="js_kit_holder" style="position: fixed; overflow-y: auto; overflow-x: hidden; visibility: hidden; top: 0; left: 0; z-index: 2001; cursor: default;"><div id="js_kit_overlay" style="position: relative; left: 50%; width: 300px; background-color: #fff;"><div id="js_kit_header" style="background-color: #3c3c3c; height: 39px; width: 100%; color: #fff; position: relative; padding: 0 20px; line-height: 39px; box-sizing: border-box; font-family: ProximaRegular, PTSans, sans-serif !important; font-size: 18px !important;"><span id="js_kit_header_title">Games.Mail.Ru</span><span id="js_kit_header_close" style="position: absolute; right: 13px; font-size: 21px !important; padding: 0 4px; cursor: pointer;">\u2715</span></div><div id="js_kit_container"></div></div></div>');
this.overlay=document.getElementById("js_kit_overlay");this.container=document.getElementById("js_kit_container");this.holder=document.getElementById("js_kit_holder");this.darkness=document.getElementById("js_kit_darkness");document.body.appendChild(this.holder);document.body.appendChild(this.darkness);document.body.removeChild(b);p.addListener(this.overlay,"click",function(a){a=a||window.event;p.stopPropagation(a)});p.addListener(window,"resize",function(){var a=x.overlay.getElementsByTagName("iframe")[0];
x.overlayVisible&&(x.show(),x.adjust(x.overlay.offsetWidth,a?a.offsetHeight:x.overlay.offsetHeight))});p.addListener(this.holder,"click",a);b=document.getElementById("js_kit_header_close");p.addListener(b,"click",a)}},getWindowSize:function(){var a={};"undefined"!=typeof window.innerWidth?(a.width=window.innerWidth,a.height=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(a.width=document.documentElement.clientWidth,
a.height=document.documentElement.clientHeight):(a.width=document.getElementsByTagName("body")[0].clientWidth,a.height=document.getElementsByTagName("body")[0].clientHeight);return a},show:function(){var a=this.getWindowSize();this.darkness.style.display="block";this.darkness.style.width=a.width+"px";this.darkness.style.height=a.height+"px";this.holder.style.visibility="visible";this.holder.style.top="0px";this.holder.style.left="0px";this.holder.style.width=a.width+"px";this.holder.style.height=
a.height+"px";this.overlayVisible=!0},adjust:function(a,b){var c=this.getWindowSize(),d=Math.round(c.height/20);this.overlay.style.width=a+"px";this.overlay.style.marginLeft="-"+(Math.round(a/2)+8)+"px";b>c.height-2*d?(this.overlay.style.marginTop=this.overlay.style.marginBottom=d+"px",document.body.style.overflowY="hidden"):this.overlay.style.marginTop=this.overlay.style.marginBottom=Math.round((c.height-b)/2)+"px";if(c=this.overlay.getElementsByTagName("iframe")[0])c.style.width=a+"px",c.style.height=
b+"px"},hide:function(){this.overlayVisible&&(this.darkness.style.display="none",this.darkness.style.width="0px",this.darkness.style.height="0px",this.holder.style.visibility="hidden",this.holder.style.top="-10000px",this.holder.style.left="-10000px",this.overlayVisible=!1,document.body.style.overflowY="")},clear:function(){p.setInnerHtml(this.container,"")},setTitle:function(a){document.getElementById("js_kit_header_title").innerText=a}},v={clsFocused:"gmrSignin__focused",clsChecked:"gmrSignin__checked",
box:null,login:null,domain:null,domainTxt:null,setDomainText:function(){this.domainTxt.innerText=this.domainTxt.textContent="@"+this.domain.value},openSocAuth:function(a,b){a=a||window.event;b({page:(a.target||a.srcElement).getAttribute("data-page")});p.preventDefault(a);p.stopPropagation(a);return!1},setMethods:function(){var a=this;this.vkBtn&&p.addListener(this.vkBtn,"click",function(b){return a.openSocAuth(b,GMR.showVKSigninForm)});this.fbBtn&&p.addListener(this.fbBtn,"click",function(b){return a.openSocAuth(b,
GMR.showFBSigninForm)});this.okBtn&&p.addListener(this.okBtn,"click",function(b){return a.openSocAuth(b,GMR.showOKSigninForm)});p.addListener(this.login,"focusin",function(){p.addClass(a.box,a.clsFocused)});this.stBtn&&p.addListener(this.stBtn,"click",function(b){return a.openSocAuth(b,GMR.showSTSigninForm)});this.rtBtn&&p.addListener(this.rtBtn,"click",function(b){return a.openSocAuth(b,GMR.showRTSigninForm)});p.addListener(this.login,"focusout",function(b){p.removeClass(a.box,a.clsFocused)});p.addListener(this.domain,
"focusin",function(){p.addClass(a.box,a.clsFocused)});p.addListener(this.domain,"focusout",function(){p.removeClass(a.box,a.clsFocused)});p.addListener(this.domain,"change",function(){a.setDomainText()});p.addListener(this.passwordInp,"focusin",function(){p.addClass(a.password,a.clsFocused)});p.addListener(this.passwordInp,"focusout",function(b){p.removeClass(a.password,a.clsFocused)});p.addListener(this.remember,"click",function(b){a.remember.checked?p.addClass(a.remember.parentNode,a.clsChecked):
p.removeClass(a.remember.parentNode,a.clsChecked)})},init:function(){this.vkBtn=p.gebi("js_kit_signin__social__btn_vk");this.fbBtn=p.gebi("js_kit_signin__social__btn_fb");this.okBtn=p.gebi("js_kit_signin__social__btn_ok");this.stBtn=p.gebi("js_kit_signin__social__btn_st");this.rtBtn=p.gebi("js_kit_signin__social__btn_rt");this.box=p.gebi("js_kit_signin__box");this.login=p.gebi("js_kit_signin__box__login");this.domain=p.gebi("js_kit_signin__box__domain");this.domainTxt=p.gebi("js_kit_signin__box__domain__txt");
this.password=p.gebi("js_kit_signin__password");this.passwordInp=p.gebi("js_kit_signin__password__input");this.remember=p.gebi("js_kit_signin__remember");this.setMethods();this.setDomainText()}};GMR.settings={id:null,page:null,signup_page:null,online_interval:6E5,vk_app_id:4775445,vk_enabled:!1,fb_app_id:1,fb_enabled:!1,ok_app_id:1147805952,ok_enabled:!1,st_app_id:381640,st_enabled:!1,rt_app_id:63,rt_enabled:!1};GMR.noconflict=function(){var a=window.GMR;window.GMR=r;return a};GMR.config=function(a){for(var b in a)GMR.settings[b]=
a[b]};GMR.showSignupForm=function(a){a&&window.console&&window.console.warn("Passing {page: '...'} to GMR.showSignupForm is deprecated! Use GMR.config({ page: '...' }) instead.");a=a||{};x.hide();var c=String(GMR.settings.signup_page||GMR.settings.page||a.page||document.location);p.loadXdm(function(){var a=s+"//"+q+"/kit/signup/?page="+encodeURIComponent(c)+"&verification="+encodeURIComponent(GMR.settings.verification||"")+"&site_id="+encodeURIComponent(h)+"&theme="+encodeURIComponent(GMR.settings.theme||
"")+"&set_domain="+(GMR.set_domain||r&&r.set_domain?1:0);x.init();x.setTitle("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f Mail.Ru");x.clear();new easyXDM.Socket({remote:a,swf:s+"//"+w+"/sjs/libs/_easyxdm.swf",container:x.container,props:{frameborder:0,scrolling:"no"},onMessage:function(a,b){e(a,b)}});b()})};GMR.showGamesSigninForm=function(a){a&&window.console&&window.console.warn("Passing {page: '...'} to GMR.showSigninForm is deprecated! Use GMR.config({ page: '...' }) instead.");
a=a||{};x.hide();a=s+"//"+q+"/kit/signin/?page="+encodeURIComponent(String(GMR.settings.page||a.page||document.location))+"&site_id="+encodeURIComponent(h)+"&theme="+encodeURIComponent(GMR.settings.theme||"");GMR.settings.vk_enabled&&(a+="&vk_enabled=1&vk_app_id="+encodeURIComponent(GMR.settings.vk_app_id));GMR.settings.fb_enabled&&(a+="&fb_enabled=1&fb_app_id="+encodeURIComponent(GMR.settings.fb_app_id));GMR.settings.ok_enabled&&(a+="&ok_enabled=1&ok_app_id="+encodeURIComponent(GMR.settings.ok_app_id));
GMR.settings.st_enabled&&(a+="&st_enabled=1&st_app_id="+encodeURIComponent(GMR.settings.st_app_id));GMR.settings.rt_enabled&&(a+="&rt_enabled=1&rt_app_id="+encodeURIComponent(GMR.settings.rt_app_id));GMR.settings.fake_auth_page&&(a+="&fake_auth_page="+GMR.settings.fake_auth_page);GMR.settings.no_domain&&(a+="&no_domain=1");GMR.settings.restore_page&&(a+="&restore_page="+GMR.settings.restore_page);p.loadJSONP(a,function(a){x.init();x.clear();x.setTitle("\u0412\u0445\u043e\u0434");p.setInnerHtml(x.container,
a);x.adjust(440,285);v.init();x.show();b()})};var B=null;GMR.showPortalSigninForm=function(a){function b(d){var e=p.extend({},{email_expand:GMR.settings.fake_auth_page?!0:!1,success_redirect:String(c),custom_registration:!0,fakeauth_url:GMR.settings.fake_auth_page,title_authorized:1,title:1},GMR.settings.portal_signin);GMR.settings.vk_enabled&&(e.vk=GMR.settings.vk_app_id||1);GMR.settings.ok_enabled&&(e.ok=GMR.settings.ok_app_id||1);GMR.settings.fb_enabled&&(e.fb=GMR.settings.fb_app_id||1);GMR.settings.rt_enabled&&
(e.rt=GMR.settings.rt_app_id||1);GMR.settings.st_enabled&&(e.st=GMR.settings.st_app_id||1);d.setSettings(e);d.on("click:signup",function(){d.hide();GMR.showSignupForm({page:a.page})})}a&&window.console&&window.console.warn("Passing {page: '...'} to GMR.showSigninForm is deprecated! Use GMR.config({ page: '...' }) instead.");a=a||{};x.hide();var c=String(a.page||GMR.settings.page||document.location);B?B.show():p.loadScript("https://img.imgsmail.ru/ag/l.js",function(){__AG.then(function(a){B=a;b(B);
B.show()})})};GMR.showSigninForm=function(a){GMR.settings.portal_signin?GMR.showPortalSigninForm(a):GMR.showGamesSigninForm(a)};GMR.showVKSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_vk?display=popup";a.client_id=GMR.settings.vk_app_id;f(a)};GMR.showFBSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_fb?display=popup";a.client_id=GMR.settings.fb_app_id;f(a)};GMR.showOKSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_ok?display=m";
a.client_id=GMR.settings.ok_app_id;f(a)};GMR.showSTSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_st";a.client_id=GMR.settings.st_app_id;a.height=550;f(a)};GMR.showRTSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_rt";a.client_id=GMR.settings.rt_app_id;a.width=500;a.height=583;f(a)};GMR.showRRSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_rambler";a.client_id=GMR.settings.rambler_app_id;a.width=500;a.height=
583;f(a)};GMR.showSetEmailForm=function(a){a=a||{};x.hide();p.loadXdm(function(){var b=s+"//"+q+"/kit/setemail/?page="+encodeURIComponent(a.page||document.location)+"&site_id="+encodeURIComponent(h)+"&theme="+encodeURIComponent(GMR.settings.theme||"")+"&set_domain="+(GMR.set_domain||r&&r.set_domain?1:0);x.init();x.clear();x.setTitle("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 Email \u0430\u0434\u0440\u0435\u0441");new easyXDM.Socket({remote:b,swf:s+"//"+w+"/sjs/libs/_easyxdm.swf",
container:x.container,props:{frameborder:0,scrolling:"no"},onMessage:function(a,b){e(a,b)}})})};GMR.hideOverlay=x.hide;GMR.rbFormCompleted=c;GMR.trackOnline=function(){function a(b){b||(b="online");b=s+"//"+t+"/online/set?project_id="+encodeURIComponent(GMR.settings.id)+"&type=gmr&"+b+"=1&rnd="+Math.random();p.loadJSONP(b,function(){})}p.addListener(window,"unload",function(){a("offline")});setInterval(a,GMR.settings.online_interval);a()};var G=void 0;GMR.detectGameCenter=function(a){function b(){var a=
document.createElement("div");a.style.width="0px";a.style.height="0px";a.style.visibility="hidden";document.body.appendChild(a);GameCenter.wsTunEnabled=!0;GameCenter.init(a,function(a){switch(a.Method){case "GetAuthCode":a=p.getCookie("Mpop"),GameCenter.setAuthCode(a)}},function(){},function(){G=!0;c.resolve();clearTimeout(d)},function(){G=!1},0)}var c=GMR.Deferred(),d;if("undefined"!=typeof G)return c[G?"resolve":"reject"](),c.promise();d=setTimeout(function(){G=!1;c.reject()},1E3*(a||GMR.settings.gc_detect_timeout||
3));window.GameCenter?b():p.loadScript("//"+w+"/sjs/common/_gcdapi.js",b);return c.promise()};GMR.downloadGame=function(a,b){a=a||GMR.settings.gc_id;b=b||GMR.settings.download_url;if(!b)throw"No gc_download_url in GMR.downloadGame";if(G&&a){var c=String(a).split("."),d=Number(c[0]),c=Number(c[1]);if(isNaN(d)||isNaN(c))throw"Invalid gc_id in GMR.downloadGame";GameCenter.showGame(d,c,1)}else setTimeout(function(){GMR.showDownloadHint(b)},300),d=document.createElement("iframe"),b.match(/^https:/)||(window.console&&
window.console.error("download_url should be https: ",b),b=b.replace(/^\w+:/,"https:")),d.src=b+"#"+Math.random(),d.style.visibility="hidden",d.style.width="0px",d.style.height="0px",document.body.appendChild(d)};GMR.detectAndDownload=function(a,b,c){GMR.detectGameCenter(c).always(function(){GMR.downloadGame(a,b)})}})();
/*# sourceMappingURL=/js/kit_client.js.map */